{"version":3,"sources":["components/Notification.js","components/Filter.js","components/Person.js","components/Persons.js","components/AddPersonForm.js","services/persons.js","App.js","index.js"],"names":["Notification","className","message","isError","Filter","handleFilterChange","filter","onChange","value","Person","person","handleDeletePerson","name","number","onClick","id","Persons","persons","map","key","AddPersonForm","handleNameChange","newName","handlePhoneNumberChange","newPhoneNumber","handleNewPerson","type","baseUrl","axios","get","then","response","data","newPerson","post","updatedPerson","put","console","log","delete","App","useState","setPersons","setNewName","setNewPhoneNumber","setFilter","notification","setNotification","displayNotification","setTimeout","useEffect","personService","length","catch","error","sortedPersons","sort","a","b","localeCompare","filteredPersons","toLocaleLowerCase","includes","event","target","preventDefault","duplicatePerson","find","window","confirm","createdPerson","concat","personToDelete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.23032ddf.chunk.js","sourcesContent":["import React from 'react'\r\nimport './notification.css'\r\n\r\nconst Notification = ({ message, isError }) => {\r\n    if (message === null){ return null }\r\n\r\n    let className\r\n    if (isError){ className = 'error' }\r\n    else { className = 'notification' }\r\n\r\n    return (\r\n        <div className={className}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst Filter = ({ handleFilterChange, filter }) => <input onChange={handleFilterChange} value={filter} />\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Person = ({ person, handleDeletePerson }) => {\r\n    //console.log(person)\r\n    return (\r\n        <tr>\r\n            <td>{person.name}</td>\r\n            <td>{person.number}</td>\r\n            <td><button onClick={() => handleDeletePerson(person.id)}>Delete</button></td>\r\n        </tr>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({ persons, handleDeletePerson }) => (\r\n\r\n    <table>\r\n        <tbody>\r\n            { persons.map(person => <Person key={person.name} person={person} handleDeletePerson={handleDeletePerson} />) }\r\n        </tbody>\r\n    </table>\r\n)\r\n    \r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst AddPersonForm = ({ handleNameChange, newName, handlePhoneNumberChange, newPhoneNumber, handleNewPerson }) => (\r\n    <form>\r\n        <div>\r\n            name: <input onChange={handleNameChange} value={newName} /><br />\r\n            phone number: <input onChange={handlePhoneNumberChange} value={newPhoneNumber} />\r\n        </div>\r\n        <div>\r\n            <button onClick={handleNewPerson} type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n)\r\n\r\nexport default AddPersonForm","import axios from 'axios'\r\n\r\n// const baseUrl = 'http://localhost:3001/api/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl).then(response => response.data)\r\n}\r\n\r\nconst create = (newPerson) => {\r\n    return axios.post(baseUrl, newPerson).then(response => response.data)\r\n}\r\n\r\nconst update = (id, updatedPerson) => {\r\n    return axios.put(`${baseUrl}/${id}`, updatedPerson).then(response => {\r\n        console.log('update response:', response.data)\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import React, { useState, useEffect } from 'react'\r\nimport Notification from './components/Notification'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport AddPersonForm from './components/AddPersonForm'\r\nimport personService from './services/persons'\r\n\r\nconst notificationShowTime = 5000\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons] = useState([]) \r\n    const [ newName, setNewName ] = useState('')\r\n    const [ newPhoneNumber, setNewPhoneNumber ] = useState('')\r\n    const [ filter, setFilter] = useState('')\r\n    const [ notification, setNotification ] = useState({message: null, isError: false})\r\n\r\n    const displayNotification = (message, isError=false) => {\r\n        setNotification({message, isError})\r\n        if (!isError) {\r\n            setTimeout(() => { setNotification({message: null, isError: false})}, notificationShowTime)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        personService\r\n            .getAll()\r\n            .then(persons => {\r\n                console.log('axios response:')\r\n                console.log(persons)\r\n                setPersons(persons)\r\n                displayNotification(`${persons.length} persons fetched`)\r\n\r\n            })\r\n            .catch(error => {\r\n                displayNotification(`Error fetching persons. Maybe your internet connection is down? (${error.response.data.error})`, true)\r\n            })\r\n    }, []) // run only once\r\n\r\n\r\n    const handleNewPerson = (event) => {\r\n        event.preventDefault()\r\n        //console.log(newName)\r\n        const newPerson = { \r\n            name: newName,\r\n            number: newPhoneNumber\r\n        }\r\n        console.log('new person: ', newPerson)\r\n        // Check for duplicate entries\r\n        const duplicatePerson = persons.find(person => person.name === newName)\r\n\r\n        if (duplicatePerson) { \r\n            console.log('person exists')\r\n            if (window.confirm(`${newName} already exists\\n` +\r\n                               `Current phone number: ${duplicatePerson.number}\\n` + \r\n                               `Replace phone number with ${newPhoneNumber}?`\r\n            )){\r\n                personService\r\n                    .update(duplicatePerson.id, newPerson)\r\n                    .then(updatedPerson => {\r\n                        console.log('updatedPerson', updatedPerson)\r\n                        setPersons(persons.map(person => person.id === updatedPerson.id ? updatedPerson : person))\r\n                        setNewName('')\r\n                        setNewPhoneNumber('')\r\n                        displayNotification(`Updated telephone number for ${newName}`, false)\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error.response.data)\r\n                        displayNotification(`Error updating person: ${error.response.data.error}`, true)\r\n                    })\r\n            }\r\n            }\r\n        else {\r\n            console.log('person doesn\\'t exist, adding')\r\n            personService\r\n                .create(newPerson)\r\n                .then(createdPerson => {\r\n                    setPersons(persons.concat(createdPerson))\r\n                    setNewName('')\r\n                    setNewPhoneNumber('')\r\n                    displayNotification(`Added ${createdPerson.name}`, false)\r\n                })\r\n                .catch(error => {\r\n                    console.log(error.response.data)\r\n                    displayNotification(`Error creating person: ${error.response.data.error}`, true)\r\n                })\r\n            \r\n            \r\n        }\r\n    }\r\n\r\n    const handleDeletePerson = (id) => {\r\n        console.log(`Deleting person ${id}`)\r\n        const personToDelete = persons.find(person => person.id === id)\r\n\r\n        if (window.confirm(`Are you sure you want to delete ${personToDelete.name}?`)){\r\n            personService\r\n                .deletePerson(id)\r\n                .then(() => {\r\n                    setPersons(persons.filter(person => person.id !== id))\r\n                    displayNotification(`${personToDelete.name} deleted`)\r\n                })\r\n                .catch(error => {\r\n                    displayNotification(`Error deleting person: ${error.response.data.error}`, true)\r\n                })\r\n        }\r\n    }\r\n\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handlePhoneNumberChange = (event) => {\r\n        setNewPhoneNumber(event.target.value)\r\n    }\r\n\r\n    const handleFilterChange = (event) => setFilter(event.target.value)\r\n\r\n    const sortedPersons = persons.sort((a, b) => a.name.localeCompare(b.name))\r\n\r\n    const filteredPersons = \r\n        filter \r\n        ? sortedPersons.filter(person => person.name.toLocaleLowerCase().includes(filter.toLocaleLowerCase()))\r\n        : sortedPersons\r\n\r\n    return (\r\n        <div>\r\n            <h1>Phonebook</h1>\r\n            <Notification message={notification.message} isError={notification.isError} />\r\n            <h2>Filter</h2>\r\n            <Filter \r\n                handleFilterChange={handleFilterChange} \r\n                filter={filter} \r\n                />\r\n            <h2>Add a new person</h2>\r\n            <AddPersonForm \r\n                handleNameChange={handleNameChange}\r\n                newName={newName}\r\n                handlePhoneNumberChange={handlePhoneNumberChange}\r\n                newPhoneNumber={newPhoneNumber}\r\n                handleNewPerson={handleNewPerson}\r\n                />\r\n            <h2>Numbers</h2>\r\n            <Persons \r\n                persons={filteredPersons} \r\n                handleDeletePerson={handleDeletePerson}\r\n                />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}