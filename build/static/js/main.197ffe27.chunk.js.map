{"version":3,"sources":["components/Notification.js","components/Filter.js","components/Person.js","components/Persons.js","components/AddPersonForm.js","services/persons.js","App.js","index.js"],"names":["Notification","className","message","isError","Filter","handleFilterChange","filter","onChange","value","Person","person","handleDeletePerson","name","number","onClick","id","Persons","persons","map","key","AddPersonForm","handleNameChange","newName","handlePhoneNumberChange","newPhoneNumber","handleNewPerson","type","baseUrl","axios","get","then","response","data","newPerson","post","updatedPerson","put","delete","App","useState","setPersons","setNewName","setNewPhoneNumber","setFilter","notification","setNotification","displayNotification","setTimeout","useEffect","personService","console","log","length","catch","error","sortedPersons","sort","a","b","localeCompare","filteredPersons","toLocaleLowerCase","includes","event","target","preventDefault","duplicatePerson","find","window","confirm","createdPerson","concat","personToDelete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.197ffe27.chunk.js","sourcesContent":["import React from 'react'\r\nimport './notification.css'\r\n\r\nconst Notification = ({ message, isError }) => {\r\n    if (message === null){ return null }\r\n\r\n    let className\r\n    if (isError){ className = 'error' }\r\n    else { className = 'notification' }\r\n\r\n    return (\r\n        <div className={className}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst Filter = ({ handleFilterChange, filter }) => <input onChange={handleFilterChange} value={filter} />\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Person = ({ person, handleDeletePerson }) => {\r\n    //console.log(person)\r\n    return (\r\n        <tr>\r\n            <td>{person.name}</td>\r\n            <td>{person.number}</td>\r\n            <td><button onClick={() => handleDeletePerson(person.id)}>Delete</button></td>\r\n        </tr>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({ persons, handleDeletePerson }) => (\r\n\r\n    <table>\r\n        <tbody>\r\n            { persons.map(person => <Person key={person.name} person={person} handleDeletePerson={handleDeletePerson} />) }\r\n        </tbody>\r\n    </table>\r\n)\r\n    \r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst AddPersonForm = ({ handleNameChange, newName, handlePhoneNumberChange, newPhoneNumber, handleNewPerson }) => (\r\n    <form>\r\n        <div>\r\n            name: <input onChange={handleNameChange} value={newName} /><br />\r\n            phone number: <input onChange={handlePhoneNumberChange} value={newPhoneNumber} />\r\n        </div>\r\n        <div>\r\n            <button onClick={handleNewPerson} type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n)\r\n\r\nexport default AddPersonForm","import axios from 'axios'\r\n\r\n// const baseUrl = 'http://localhost:3001/api/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl).then(response => response.data)\r\n}\r\n\r\nconst create = (newPerson) => {\r\n    return axios.post(baseUrl, newPerson).then(response => response.data)\r\n}\r\n\r\nconst update = (id, updatedPerson) => {\r\n    return axios.put(`${baseUrl}/${id}`, updatedPerson).then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import React, { useState, useEffect } from 'react'\r\nimport Notification from './components/Notification'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport AddPersonForm from './components/AddPersonForm'\r\nimport personService from './services/persons'\r\n\r\nconst notificationShowTime = 5000\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons] = useState([]) \r\n    const [ newName, setNewName ] = useState('')\r\n    const [ newPhoneNumber, setNewPhoneNumber ] = useState('')\r\n    const [ filter, setFilter] = useState('')\r\n    const [ notification, setNotification ] = useState({message: null, isError: false})\r\n\r\n    const displayNotification = (message, isError=false) => {\r\n        setNotification({message, isError})\r\n        if (!isError) {\r\n            setTimeout(() => { setNotification({message: null, isError: false})}, notificationShowTime)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        personService\r\n            .getAll()\r\n            .then(persons => {\r\n                console.log('axios response:')\r\n                console.log(persons)\r\n                setPersons(persons)\r\n                displayNotification(`${persons.length} persons fetched`)\r\n\r\n            })\r\n            .catch(error => {\r\n                displayNotification(`Error fetching persons. Maybe your internet connection is down? (${error.message})`, true)\r\n            })\r\n    }, []) // run only once\r\n\r\n\r\n    const handleNewPerson = (event) => {\r\n        event.preventDefault()\r\n        //console.log(newName)\r\n        const newPerson = { \r\n            name: newName,\r\n            number: newPhoneNumber\r\n        }\r\n        console.log('new person: ', newPerson)\r\n        // Check for duplicate entries\r\n        const duplicatePerson = persons.find(person => person.name === newName)\r\n\r\n        if (duplicatePerson) { \r\n            console.log('person exists')\r\n            if (window.confirm(`${newName} already exists\\n` +\r\n                               `Current phone number: ${duplicatePerson.number}\\n` + \r\n                               `Replace phone number with ${newPhoneNumber}?`\r\n            )){\r\n                personService\r\n                    .update(duplicatePerson.id, newPerson)\r\n                    .then(updatedPerson => {\r\n                        setPersons(persons.map(person => person.id === updatedPerson.id ? updatedPerson : person))\r\n                        setNewName('')\r\n                        setNewPhoneNumber('')\r\n                        displayNotification(`Updated telephone number for ${newName}`, false)\r\n                    })\r\n                    .catch(error => {\r\n                        displayNotification(`Error updating person: ${error.message}`, true)\r\n                    })\r\n            }\r\n            }\r\n        else {\r\n            console.log('person doesn\\'t exist, adding')\r\n            personService\r\n                .create(newPerson)\r\n                .then(createdPerson => {\r\n                    setPersons(persons.concat(createdPerson))\r\n                    setNewName('')\r\n                    setNewPhoneNumber('')\r\n                    displayNotification(`Added ${createdPerson.name}`, false)\r\n                })\r\n                .catch(error => {\r\n                    displayNotification(`Error creating person: ${error.message}`, true)\r\n                })\r\n            \r\n            \r\n        }\r\n    }\r\n\r\n    const handleDeletePerson = (id) => {\r\n        console.log(`Deleting person ${id}`)\r\n        const personToDelete = persons.find(person => person.id === id)\r\n\r\n        if (window.confirm(`Are you sure you want to delete ${personToDelete.name}?`)){\r\n            personService\r\n                .deletePerson(id)\r\n                .then(() => {\r\n                    setPersons(persons.filter(person => person.id !== id))\r\n                    displayNotification(`${personToDelete.name} deleted`)\r\n                })\r\n                .catch(error => {\r\n                    displayNotification(`Error deleting person: ${error.message}`, true)\r\n                })\r\n        }\r\n    }\r\n\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handlePhoneNumberChange = (event) => {\r\n        setNewPhoneNumber(event.target.value)\r\n    }\r\n\r\n    const handleFilterChange = (event) => setFilter(event.target.value)\r\n\r\n    const sortedPersons = persons.sort((a, b) => a.name.localeCompare(b.name))\r\n\r\n    const filteredPersons = \r\n        filter \r\n        ? sortedPersons.filter(person => person.name.toLocaleLowerCase().includes(filter.toLocaleLowerCase()))\r\n        : sortedPersons\r\n\r\n    return (\r\n        <div>\r\n            <h1>Phonebook</h1>\r\n            <Notification message={notification.message} isError={notification.isError} />\r\n            <h2>Filter</h2>\r\n            <Filter \r\n                handleFilterChange={handleFilterChange} \r\n                filter={filter} \r\n                />\r\n            <h2>Add a new person</h2>\r\n            <AddPersonForm \r\n                handleNameChange={handleNameChange}\r\n                newName={newName}\r\n                handlePhoneNumberChange={handlePhoneNumberChange}\r\n                newPhoneNumber={newPhoneNumber}\r\n                handleNewPerson={handleNewPerson}\r\n                />\r\n            <h2>Numbers</h2>\r\n            <Persons \r\n                persons={filteredPersons} \r\n                handleDeletePerson={handleDeletePerson}\r\n                />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}